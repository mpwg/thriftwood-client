# Fastlane configuration for Thriftwood iOS
# See https://docs.fastlane.tools for details

default_platform(:ios)

platform :ios do
  desc "Build and sign IPA for App Store/TestFlight"
  lane :build do
    match(type: "appstore") # Handles provisioning profiles and certificates
    gym(scheme: "ThriftwoodNative", export_method: "app-store") # Build IPA
  end

  desc "Deploy to TestFlight"
  lane :beta do
    build
    pilot # Upload to TestFlight
  end

  desc "Deploy to App Store"
  lane :release do
    build
    deliver(force: true) # Upload to App Store Connect
  end

  desc "Take screenshots"
  lane :screenshots do
    capture_screenshots
  end

  desc "Update metadata"
  lane :metadata do
    deliver(skip_upload: true, force: true)
  end
end
